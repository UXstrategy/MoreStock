<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>튜브 바람 넣기 챌린지 이벤트</title>

    <!-- include css-->
    <!-- <link rel="stylesheet" href="https://www1.kiwoom.com/m/kms/assets/css/reset.css">
    <link rel="stylesheet" href="https://www1.kiwoom.com/m/kms/assets/lib/swiper.min.css">
    <link rel="stylesheet" href="https://www1.kiwoom.com/m/kms/assets/lib/jquery-ui.min.css">
    <link rel="stylesheet" href="https://www1.kiwoom.com/m/kms/assets/css/share.css?20240520">
    <link rel="stylesheet" href="https://www1.kiwoom.com/m/kms/assets/css/common.css?20240520"> -->

    <!-- include js-->
    <!-- <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/lib/jquery-3.5.0.min.js?20231018"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/lib/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/lib/jquery.ui.touch-punch.js"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/lib/swiper.min.js"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/lib/fontfaceonload.js"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/js/share.js?20210811"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/js/interaction.js"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/js/browser.js"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/js/appLink.js?20220928"></script>
    <script type="text/javascript" src="https://www1.kiwoom.com/m/kms/assets/js/kwscommon.js"></script> -->
    
    <link rel="stylesheet" href="../assets/css/tube_event.css">
</head>
<body>
    <div class="wrap main">
        <header>
            <h1><img src="../assets/images/logo.png" alt="튜브 바람 넣기 챌린지"></h1>
            <button type="button" class="btn_close"><img src="../assets/images/btn_close.png" alt="닫기"></button>
        </header>
        <div class="ready">
            <div class="text_guide">
                <div class="limit">제한 시간 <span class="second"></span>초 내<br><span>목표 개수 터치</span>하면 성공!</div>
                <div class="text">목표 개수 : <span><span class="goal"></span>개</span></div>
            </div>
            <div class="text_ready"><div class="ready_count"></div></div>
        </div>
        <div class="start">
            <div class="round_guide">
                <div class="limit">제한 시간 <span class="second"></span>초 내<br><span>목표 개수 터치</span>하면 성공!</div>
                <div class="text">목표 개수 : <span><span class="goal"></span>개</span></div>
            </div>
            <div class="success_goal">
                <div class="success_wrap"><ol class="success"><li>0</li><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li><li>79</li><li>80</li><li>81</li><li>82</li><li>83</li><li>84</li><li>85</li><li>86</li><li>87</li><li>88</li><li>89</li><li>90</li><li>91</li><li>92</li><li>93</li><li>94</li><li>95</li><li>96</li><li>97</li><li>98</li><li>99</li><li>100</li><li>101</li><li>102</li><li>103</li><li>104</li><li>105</li><li>106</li><li>107</li><li>108</li><li>109</li><li>110</li><li>111</li><li>112</li><li>113</li><li>114</li><li>115</li><li>116</li><li>117</li><li>118</li><li>119</li><li>120</li><li>121</li><li>122</li><li>123</li><li>124</li><li>125</li><li>126</li><li>127</li><li>128</li><li>129</li><li>130</li><li>131</li><li>132</li><li>133</li><li>134</li><li>135</li><li>136</li><li>137</li><li>138</li><li>139</li><li>140</li><li>141</li><li>142</li><li>143</li><li>144</li><li>145</li><li>146</li><li>147</li><li>148</li><li>149</li><li>150</li><li>151</li><li>152</li><li>153</li><li>154</li><li>155</li><li>156</li><li>157</li><li>158</li><li>159</li><li>160</li><li>161</li><li>162</li><li>163</li><li>164</li><li>165</li><li>166</li><li>167</li><li>168</li><li>169</li><li>170</li><li>171</li><li>172</li><li>173</li><li>174</li><li>175</li><li>176</li><li>177</li><li>178</li><li>179</li><li>180</li><li>181</li><li>182</li><li>183</li><li>184</li><li>185</li><li>186</li><li>187</li><li>188</li><li>189</li><li>190</li><li>191</li><li>192</li><li>193</li><li>194</li><li>195</li><li>196</li><li>197</li><li>198</li><li>199</li><li>200</li></ol></div>
                <div class="slash">/</div>
                <div class="goal"></div>
            </div>
            <div class="time">
                <div class="progressbar"></div>
                <div class="timer"></div>
            </div>
            <div class="face"></div>
            <div class="body"></div>
            <div class="tube"></div>
            <div class="gameover"></div>
            <div class="btn_put"></div>
        </div>
        <div class="result">
            <div class="btn_wrap">
                <button type="button" class="btn_share" onclick="location.href='../html/game.html'"><img src="../assets/images/btn_share.png" alt="공유 후 재도전"></button>
                <button type="button" class="btn_share_single" onclick="location.href='../html/game.html'"><img src="../assets/images/btn_share_single.png" alt="공유 후 재도전"></button>
                <button type="button" class="btn_point"><img src="../assets/images/btn_point.png" alt="포인트 수령"></button>
            </div>
        </div>
    </div>
    
    <script src="../assets/js/jquery-3.3.1.min.js"></script>
    <script src="../assets/js/common.js"></script>
    <script>
        let round = 1;
        let goal = 10;
        let second = 10;
        let ten = 0;
        let count = 0;
        let success = 0;
        let tube = 1;
        let touch = true;
        $(".second").text(second);
        $(".goal").text(goal);
        setTimeout(() => {
            $(".text_guide").hide();
            $(".text_ready").show();
        }, 2000);
        setTimeout(() => {
            $(".ready").hide();
            $(".start").show();
            start();
        }, 3000);
        function start() {
            if (round == 2) {
                goal = 20;
                second = 10;
            } else if (round == 3) {
                goal = 30;
                second = 10;
            } else if (round == 4) {
                goal = 40;
                second = 10;
            } else if (round == 5) {
                goal = 50;
                second = 10;
            }
            $(".goal").text(goal);
            $(".second").text(second);
            $(".progressbar").css("animation", "progressbar "+ second +"s linear forwards");
            $(".success").css("top", "0");
            $(".face").removeClass("face_success");
            if (round == 1) {
                timeLimit();
            } else {
                $(".round_guide").addClass("round_guide" + round).show();
                setTimeout(() => {
                    $(".round_guide").hide();
                    $(".progressbar").show();
                    touch = true;
                    timeLimit();
                }, 2000);
            }
            second = second - 1;
            ten = 99;
            success = 0;
            function timeLimit() {
                limitInterval = setInterval(()=> {
                    ten--;
                    if (ten < 10) {
                        ten = "0" + ten;
                    }
                    if (ten == 0) {
                        second--;
                        ten = 99;
                    }
                    $(".timer").text(second + " : " + ten);
                    if (second == 3) {
                        $(".start, .time").addClass("warning");
                    }
                    if (second < 0) {
                        clearInterval(limitInterval);
                        $(".start").removeClass("warning");
                        $(".timer").text("0 : 00");
                        $(".gameover").show();
                        touch = false;
                        setTimeout(() => {
                            $(".start").hide();
                            $(".result").show().addClass("result" + round);
                            if (round == 1) {
                                $(".btn_wrap").addClass("zero");
                            }
                        }, 2000);
                    }
                }, 10);
            }
        }
        $(".btn_put").off().on("click", function() {
            if (touch) {
                count++;
                if (count % 2 == 0) {
                    $(".body").addClass("pull");
                } else {
                    $(".body").removeClass("pull");
                }
                if (count == goal / 2) {
                    tube++;
                    $(".tube").addClass("tube" + tube);
                }
                success = success - 28;
                $(".success").css("top", success + "rem");
                if (count == goal) {
                    clearInterval(limitInterval);
                    round++;
                    tube++;
                    $(".start").removeClass("warning");
                    $(".progressbar").css("animation-play-state", "paused");
                    $(".face").addClass("face" + round + " face_success");
                    $(".tube").addClass("tube" + tube);
                    setTimeout(() => {
                        if (round == 6) {
                            $(".start").hide();
                            $(".result").show().addClass("result" + round);
                        } else {
                            count = 0;
                            touch = false;
                            $(".time").removeClass("warning");
                            $(".progressbar").hide();
                            $(".timer").text("10 : 00");
                            start();
                        }
                    }, 2000);
                }
                if (count > goal) {
                    round = round - 1;
                    $(".start").hide();
                    $(".result").show().addClass("result" + round);
                    if (round == 1) {
                        $(".btn_wrap").addClass("zero");
                    }
                }
            }
        });
    </script>
</body>
</html>